---
layout: page
title: kafka vs rabbitmq
permalink: /doc/blog/kafka_vs_rabbitmq/
---

<!-- TODO 公開してもいいかもしれない -->
# RabbitMQとApache Kafkaの共通機能

## メッセージのパブリッシュ/サブスクライブ

両者ともプロデューサーからメッセージを受け取り、コンシューマーにメッセージを配信する基本的なパブリッシュ/サブスクライブ機能を持っています。Kafkaは主にログベースのパブリッシュ/サブスクライブモデルを採用しており、メッセージはトピックに書き込まれ、コンシューマーがそれを読み取ります。一方、RabbitMQはメッセージをキューに送信し、コンシューマーがそれを受け取るモデルを採用しています。

## メッセージのキューイング

両者ともメッセージをキューに一時的に保存し、コンシューマーが後から取り出せる機能があります。Kafkaはメッセージをトピックに書き込み、コンシューマーがそれをオフセットを使って読み取ります。RabbitMQはメッセージをキューに保存し、コンシューマーがそれをプルまたはプッシュで受け取ります。

## 永続化

メッセージをディスクに永続化して、システム障害からの復旧を可能にする機能があります。Kafkaはメッセージをディスクに書き込み、複数のサーバーにレプリケートすることで高い耐障害性を持っています。RabbitMQもメッセージの永続化とレプリケーションをサポートしていますが、Kafkaほどのスケーラビリティはありません。

## クラスタリング

複数のブローカー/ノードで構成されるクラスター環境に対応しています。Kafkaは分散システムとして設計されており、クラスタリングが容易で高いスケーラビリティを持っています。RabbitMQもクラスタリングをサポートしていますが、設定や管理がKafkaほど簡単ではありません。

## クライアントライブラリ

さまざまな言語で利用できるクライアントライブラリが用意されています。KafkaとRabbitMQの両方がJava、Python、Goなどの多くのプログラミング言語をサポートしています。

## セキュリティ

TLS/SSLなどを使ったメッセージの暗号化や、認証機能が備わっています。KafkaはTLSとJava Authentication and Authorization Service (JAAS) をサポートし、RabbitMQはSSLとユーザーアクセス制御を提供しています。

## プロトコルサポート

AMQPなどの標準プロトコルをサポートしています。RabbitMQはAMQP、STOMP、MQTTなどの複数のプロトコルをサポートしており、Kafkaは主に独自のバイナリプロトコルを使用しています。

## 結論

RabbitMQは伝統的なメッセージブローカーとしての役割を果たすのに対し、Kafkaはビッグデータ処理に特化した分散ストリーミングプラットフォームとして設計されています。これにより、RabbitMQは複雑なルーティングやメッセージの優先順位付けに優れ、Kafkaは高スループ
